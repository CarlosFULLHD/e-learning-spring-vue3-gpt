# E-Learning Platform Database

This README provides an overview of the database for the E-Learning platform with Chat GPT integration. The database is designed to support a web application that offers online courses, lesson management, user interactions, and integration with the Chat GPT API for interactive learning.

## Database Schema

The database consists of the following tables:

### `Users`

Stores information about users of the platform, including students, instructors, and administrators.

- `id_user`: Unique identifier for the user.
- `username`: The user's chosen username.
- `email`: The user's email address.
- `role`: The user's role in the platform (e.g., 'student', 'instructor', 'admin').

### `Roles`

Defines the various roles users can have within the platform.

- `id_role`: Unique identifier for the role.
- `role_name`: The name of the role (e.g., 'student', 'instructor').

### `UserRoles`

Associates users with roles.

- `id_user`: Foreign key to the associated user.
- `id_role`: Foreign key to the associated role.

### `FrequentlyAskedQuestions`

Stores frequently asked questions and their answers to help scale user support.

- `id_faq`: Unique identifier for the FAQ entry.
- `question`: The frequently asked question.
- `answer`: The provided answer.
- `times_asked`: The number of times this question has been asked.

### `Subjects`

Represents the courses offered on the platform.

- `id_subject`: Unique identifier for the subject/course.
- `img_link`: URL to the image representing the subject.
- `title_subject`: The title of the subject.
- `description_subject`: A brief description of the subject.
- `welcome_text`: Introductory text for the subject.
- `importance`: The importance of the subject.
- `intended_for`: The intended audience for the subject.
- `learnings_fromthis_subject`: Expected learnings from the subject.
- `roadmap_img`: URL to an image of the subject's roadmap.

### `Modules`

Modules or sections within a course.

- `id_module`: Unique identifier for the module.
- `id_subject`: Foreign key to the associated subject.
- `module_name`: The name of the module.

### `Lessons`

Individual lessons within each module.

- `id_lesson`: Unique identifier for the lesson.
- `id_module`: Foreign key to the associated module.
- `lesson_name`: The name of the lesson.
- `link_ytvideo`: URL to the associated YouTube video.
- `description_lesson`: A brief description of the lesson.

### `Resources`

Additional resources linked to courses.

- `id_resource`: Unique identifier for the resource.
- `id_subject`: Foreign key to the associated subject.
- `resource_type`: The type of resource (e.g., 'book', 'article', 'video').
- `resource_name`: The name of the resource.
- `resource_link`: URL to the resource.
- `resource_img`: URL to an image representing the resource.

### `Enrollments`

Enrollments of users in subjects/courses.

- `id_enrollment`: Unique identifier for the enrollment.
- `id_user`: Foreign key to the associated user.
- `id_subject`: Foreign key to the associated subject.
- `enrollment_date`: The date of enrollment.

### `ChatInteractions`

Record of user interactions with Chat GPT.

- `id_chat_interaction`: Unique identifier for the interaction.
- `id_user`: Foreign key to the associated user.
- `interaction_time`: Timestamp of the interaction.
- `user_question`: The question asked by the user.
- `gpt_response`: The response generated by Chat GPT.

### `Assessments`

Evaluations or tests linked to lessons.

- `id_assessment`: Unique identifier for the assessment.
- `id_lesson`: Foreign key to the associated lesson.
- `assessment_description`: Description of the assessment.

### `AssessmentResults`

Results of user assessments.

- `id_assessment_result`: Unique identifier for the assessment result.
- `id_assessment`: Foreign key to the associated assessment.
- `id_user`: Foreign key to the associated user.
- `score`: The score obtained by the user.
- `assessment_date`: The date when the assessment was taken.

### `Feedback`

Feedback from users about lessons.

- `id_feedback`: Unique identifier for the feedback.
- `id_lesson`: Foreign key to the associated lesson.
- `id_user`: Foreign key to the associated user.
- `feedback_text`: The text of the feedback.
- `feedback_date`: The date when the feedback was given.

## Database Relationships

- Users can have multiple roles and engage in different activities based on their roles.
- Users can enroll in multiple subjects.
- Subjects can contain multiple modules.
- Modules can contain multiple lessons.
- Subjects can have multiple resources associated with them.
- Users can interact with Chat GPT multiple times and about different lessons.
- Lessons can have multiple assessments.
- Users can have multiple assessment results.
- Lessons can receive multiple feedback entries from different users.

## Integration with Chat GPT

The `ChatInteractions` table is designed to store the conversation logs between the user and Chat GPT, including the initial query response. When implementing the backend logic, ensure to capture the `interaction_time`, `user_question`, `gpt_response`, and `initial_query_response` accurately to provide a seamless user experience.

## Security Considerations

Ensure that all interactions with the database, especially those involving user information, are handled securely. Do not store passwords directly; if required, use hashing and salting techniques. Implement proper access controls for different user roles, ensuring that only authorized personnel can create, edit, add, or delete courses, lessons, and modules.

## Role-Based Access Control (RBAC)

With the introduction of the `Roles` and `UserRoles` tables, the platform is now capable of handling role-based access controls internally. Different levels of access and permissions are granted based on the roles associated with each user. Backend logic should be designed to query these tables and enforce access controls accordingly.

## Managing Roles Without Auth0

Since roles are now managed within the platform's database, it is necessary to implement backend logic that:

1. Authenticates the user (possibly still using Auth0 for authentication only).
2. Queries the `UserRoles` table to retrieve the user's roles.
3. Applies the appropriate permissions based on the user's roles.
